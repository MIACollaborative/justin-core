"use strict";(self.webpackChunkjustin_core_docs=self.webpackChunkjustin_core_docs||[]).push([[9576],{9556:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>l,frontMatter:()=>a,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"concepts/users","title":"JUser","description":"All users (or \\"participants\\") in JustIn are represented by JUser objects. When adding new users to JustIn, you need to provide a NewUserRecord which is just a JUser without the JustIn-provided id.","source":"@site/versioned_docs/version-0.1.0/concepts/users.md","sourceDirName":"concepts","slug":"/concepts/users","permalink":"/justin-core/concepts/users","draft":false,"unlisted":false,"tags":[],"version":"0.1.0","lastUpdatedBy":"Mark Newman","lastUpdatedAt":1754331717000,"sidebarPosition":4,"frontMatter":{"id":"users","title":"JUser","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"JEvents","permalink":"/justin-core/concepts/events"},"next":{"title":"Exported Types","permalink":"/justin-core/reference/types"}}');var r=n(4848),i=n(8453);const a={id:"users",title:"JUser",sidebar_position:4},d="JUsers (JustIn Users)",c={},o=[{value:"Examples:",id:"examples",level:2}];function u(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"jusers-justin-users",children:"JUsers (JustIn Users)"})}),"\n",(0,r.jsxs)(s.p,{children:['All users (or "participants") in JustIn are represented by ',(0,r.jsx)(s.code,{children:"JUser"})," objects. When adding new users to JustIn, you need to provide a ",(0,r.jsx)(s.code,{children:"NewUserRecord"})," which is just a ",(0,r.jsx)(s.code,{children:"JUser"})," without the JustIn-provided id."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"JUser"})," and ",(0,r.jsx)(s.code,{children:"NewUserRecord"})," type definitions:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"export type JUser = {\n  id: string;\n  uniqueIdentifier: string;\n  attributes: Record<string, any>;\n};\n\nexport type NewUserRecord = {\n  uniqueIdentifier: string;\n  initialAttributes: Record<string, any>;\n};\n"})}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"uniqueIdentifier"})," is a required field that is ",(0,r.jsx)(s.em,{children:"provided by the application developer"}),". This allows your application to use your own, study-specific mechanism for referring to your users. Given that being able to identify users is necessary for other study activities such as participant management and data analysis, we felt that using externally-supplied identifiers made sense. It also makes log inspection and participant management a bit easier because the research team will be more able to identify particular users using study-relevant and likely human-readable identifiers (e.g. P1, ",(0,r.jsx)(s.a,{href:"mailto:participant1@study.org",children:"participant1@study.org"}),") rather than obscure, database-generated IDs like ",(0,r.jsx)(s.code,{children:"688bf62c8873d720f2d8b401"}),". Those gnarly IDs are still part of the JUser object, but you won't need them in order to manage your users in JustIn."]}),"\n",(0,r.jsxs)(s.p,{children:["The other essential aspect of each ",(0,r.jsx)(s.code,{children:"JUser"})," object is the ",(0,r.jsx)(s.code,{children:"attributes"})," field, which is a key-value map (aka ",(0,r.jsx)(s.code,{children:"Record<string, any>"}),") that you can use to represent variables related to each user that are relevant to your study, including the operation of your DecisionRules and Tasks (e.g., contextual states used for taiolring, study arm labels used for activating different intervention components, etc.)."]}),"\n",(0,r.jsx)(s.p,{children:"The JustIn functions for working with users have the following signatures:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"async addUsers (newUserRecords: NewUserRecord []): Promise<JUser []>;\nasync addUser (newUserRecord: NewUserRecord): Promise<JUser>;\nasync updateUser(uniqueIdentifier: string, attributesToUpdate: Record<string, any>): Promise<JUser>;\nasync deleteUser(uniqueIdentifier: string): Promise<void>;\nasync getUser(uniqueIdentifier: string): Promise<JUser>;\n"})}),"\n",(0,r.jsx)(s.h2,{id:"examples",children:"Examples:"}),"\n",(0,r.jsx)(s.p,{children:"For all of these examples, first initialize JustIn:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"import JustIn from '@just-in/core';\n\nconst justIn = JustIn();\nawait justIn.init();\n"})}),"\n",(0,r.jsx)(s.p,{children:"Adding users in bulk."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const usersToAdd: NewUserRecord[] = [\n  {\n    uniqueIdentifier: 'participant1',\n    initialAttributes: {\n      firstName: 'Alice',\n      studyPhase: 'active',\n      timezone: 'America/Detroit'\n    }\n  },\n  {\n    uniqueIdentifier: 'participant2',\n    initialAttributes: {\n      firstName: 'Bob',\n      studyPhase: 'baseline',\n      timezone: 'America/Los Angeles'\n    },\n  }\n]\n\nawait justIn.addUsers(usersToAdd);\n"})}),"\n",(0,r.jsx)(s.p,{children:"Adding just one user (after justIn.init(), of course):"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"await justIn.addUser({\n  uniqueIdentifier: participant3,\n  initialAttributes: {\n    firstName: 'Charlie',\n    studyPhase: 'pre-enrollment',\n    timezone: 'America/Chicago'\n  }\n});\n"})}),"\n",(0,r.jsx)(s.p,{children:"Updating a user's attributes:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"await justIn.updateUser('participant2', {studyPhase: 'active'});\n"})}),"\n",(0,r.jsx)(s.p,{children:"Deleting a user (be careful! can't undo!):"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"await justIn.deleteUser('participant1'); // bye Alice!\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Retrieving a specific ",(0,r.jsx)(s.code,{children:"JUser"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const theUser = await justIn.getUser('participant3');\n"})})]})}function l(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);